# Chapter 3. 사물인터넷 네트워크 정리 내용

## 1. 사물인터넷 네트워크 개요

### 1-1. 사물인터넷과 IPv6
- 사물인터넷 디바이스들은 제한적 환경에서 통신을 위해 **저전력 무선 통신 기술을 적용**함
  - 통신 범위, 대역폭, 비용, 전력 소비 등을 고려해 IEEE 802.15.4, Bluetooth, NFC 등 저전력 무선 근거리 통신기술 적용
- 저전력 무선 통신 기술에 IPv6 적용을 위해 6LoWPAN에서는 127 Byte의 MTU를 가지는 IEEE 802.4 프레임 안에서 IPv6 패킷을 수용하기 위한 기술 개발
  - IPv6 헤더 가운데 여러 패킷들이 공통으로 사용하는 필드인 Version, Traffic, Class, Flow Label은 고정된 값이므로 전송할 필요가 없음
  - 디바이스 네트워크 안에서 복수 개의 홉을 통한 IP 라우팅이 일어날 경우 기본적으로 40 Byte의 IPv6 헤더는 7 Byte로 압축 가능

## 2. 사물인터넷 근거리 통신 기술

### 2-1. 외이파이(WiFi)
- 사무실처럼 특정 지역에 존재하는 장치로 **무선 통신 네트워크를 구성해주는 기술**
- AP(Access Point) 혹은 핫스팟(Hotspot)을 통해 인터넷에 접속
- IEEE 802.11b, g, n 표준을 준용하며 2.4, 5 GHz ISM 대역을 이용하며 최근에는 3.6, 60 GHz 대역을 사용하는 표준도 개발 중
- 다른 무선통신 기술보다 빠르고, 다양한 표준이 존재해서 다양한 통신 환경을 지원할 수 있음

#### 와이파이 연결 모드

- **인프라스트럭처 모드(Infrastructure Mode)**
  - 2.4 GHz ISM 대역은 2.400 ~ 2.483 GHz로, 83 MHz 대역에 한 개의 채널 폭이 20. 22 MHz 채널들을 5 MHz 간격으로 배치할 수 있음 (13개 채널 이용)
  - WiFi AP는 **13개의 채널**을 살핀 후 간섭이 가장 적은 채널을 선택함
  - 주변에 신호가 거의 없다면 일반적으로 1, 6, 11번 채널 중 하나를 선택함
- **애드훅 모드(Ad-Hoc Mode)**
  - WiFi AP 없이 디바이스들이 직접 연결되는 경우
  - 와이파이 디바이스 중 한 대가 와이파이 AP 역할을 하도록 설정함

### 2-2. 블루투스와 비콘 기술
- 가까운 거리에서 데이터, 음성, 영상 등을 교환할 때 사용하는 무선 기술(2.4 GHz)로 1994년 에릭슨이 개발하였으며 스마트폰, 노트북, PC 등 널리 이용됨
- 저전력의 블루투스 스마트 기술 개발과 함께 사물인터넷에 적합한 통신 기술로 주목을 받고 있음
- 저전력 블루투스로 BLE가 있음
  - 2012년 BT4.0LE 출시

#### 블루투스 4.2
- 블루투스 SIG는 2014년 12월 블루투스 4.2 스펙을 공식적으로 채택함
- 4.0 대비 전송 속도가 2.5배 증가
- 전송 패킷 용량 10배 증가
- 전송 시 발생하는 전송 오류 및 배터리 소비량 감소
- IP 지원
- 인터넷 프로토콜 지원 프로파일(IPSP)
- 블루투스 지원 센서 또는 디바이스가 직접 인터넷에 접속 가능
- IPv6 지원으로 개별 센서 및 디바이스 모니터링 가능
- WiFi와 같은 수준의 128bit AES 암호화 기술 적용으로 보안 강화

#### 블루투스 메시 네트워크
- 인터넷 망을 이용하지 않고 기기들을 직접 연결해 지역적인 그물망을 형성하는 기술
- 센서나 전구 등 많은 기기를 한 번에 연결하는 응용분야에 적합
- '허브 앤 스포크' 방식의 블루투스 네트워크

#### 블루투스 비콘
- 선박, 기차, 비행기의 위치를 확인하거나 특정 목적의 신호를 주기적으로 신호를 보내는 장치

#### 블루투스 5
- 전송 속도 2배 향상
- 전송 거리 4배 확장
- 브로드캐스트 용량 8배 확장

### 2-3. 기타 통신

#### RFID
  - 리더가 전파를 방사하면 태그는 수신한 에너지를 이용하여 칩에 저장된 데이터를 리더로 반환하여 정보를 전달함(수동형)
  - 리더, 태그, 미들웨어로 구성됨
  - 에너지의 보유 및 이용 방법에 따라 수동형, 반능동형, 능동형으로 나뉨
  - 반능동형은 데이터를 보낼 때 자체 배터리를 이용해 데이터 전송 거리를 늘림
  - 능동형은 배터리가 내장되어 있어 센서를 통한 센싱이 가능하며, 데이터 수신 요청이 없이도 능동적으로 데이터를 보낼 수 있음

<br>

![image](https://github.com/JeHeeYu/Certificate-summary/assets/87363461/bfbeba98-af4b-4cac-b3bc-34baf0c910f7)


<br>

#### NFC
- 13.56 MHz 대의 RFID 기술을 발전시킨 것으로 비접촉식 양방향 근접 통신 기술
- Peer to peer 모드 : 두 대의 NFC 디바이스가 상호 데이터 송수신이 가능, 전력 소모량이 큼
- Reader/Writer 모드 : RFID 태그를 인식 하기 위한 리더
- Card Emulation 모드 : 기존의 RFID 카드처럼 동작하며 전원 공급이 필요 없음(교통카드, 신분증 등)

#### 지그비(Zigbee)
- 소형, 저전력, 저비용, 근거리 통신을 지향하며 IEEE 802.15.4 기반으로 구성


#### Z-Wave
- 홈 오토메이션의 모니터링과 컨트롤을 위한 저전력 통신 기술
- 900 MHz 대역
- 벽을 투과해 30m 거리 통신 구간 확보

#### WPAN
- 개인 장비를 무선으로 연결하는 네트워크


#### UWB
- 군사용 레이더 및 원격 탐지용 주파수에 대한 상업적 이용을 허용
- 근거리 광대역 통신용 기술로 표준화됨

#### WSN
- 센서를 활용한 네트워크, 자동화된 원격 정보 수집을 기본 목적으로 하며 과학적, 의학적, 군사적, 상업적 용도로 활용



## 3. 사물인터넷 전용망 통신 기술

### 3-1. 사물인터넷 전용망 개요
- IoT 서비스가 빠른 통신 속도를 갖출 필요는 없다는 점에 착안해 개발된 기술
- 속도를 늦추면 출력이 낮아지고 배터리 수명도 늘어나며 가격이 낮아짐
- 대표적인 기술로 LoRa, NB LTE-M, LTE-M Cat.1 등이 있음
- 응용 분야로 미아방지 서비스, 공공 자전거, 도시가스, 전기 검침 서비스 등



## 4. 사물인터넷 응용 계층 프로토콜

### 4-1. HTTP
- 클라이언트와 서버 간 정보를 주고받을 수 있는 애플리케이션 계층 프로토콜
- 요청/응답 기반 데이터 교환 방식

#### 동작 방식
- 클라이언트(웹)에서 서비스를 요구하고 서버와 TCP 연결 생성
- 웹에서 HTTP 표준에 맞게 요청 메시지 전송
- 서버에서 요청을 읽고 응답
- 응답 메시지는 요청 성공/실패 여부 표시


### 4-2. CoAP
- 패킷 손실률이 높은 네트워크 환경에서 저사양 하드웨어로 동작되는 센서 디바이스의 RESTful 웹 서비스를 지원하기 위한 경량 프로토콜
- IEEE 802.15.4 표준을 기반으로 삼고 IPv6을 사용
- 기존 HTTP와 변환 및 연동이 쉬움
- UDP 환경에서 유니캐스트와 멀티캐스트를 지원
- 메시지 전달 타입은 확인형, 비확인형, 승인, 리셋의 4가지로 정의됨

### 4-3. MQTT(Message Queue Telemetry Transport)
- 지연 및 손실이 심한 네트워크 환경에서 검침기, 센서 등 작은 기기들의 신뢰성 있는 메시지 전달을 위해 개발
- 메시지 손실 복구 기능 지원
















